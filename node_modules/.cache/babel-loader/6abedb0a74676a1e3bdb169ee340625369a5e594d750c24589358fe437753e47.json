{"ast":null,"code":"// src/services/websocket.js\nclass WebSocketService {\n  constructor() {\n    this.ws = null;\n    this.callbacks = new Map();\n  }\n  connect() {\n    this.ws = new WebSocket('ws://localhost:8000/ws');\n    this.ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (this.callbacks.has('status')) {\n        this.callbacks.get('status')(data.status);\n      }\n    };\n    return new Promise((resolve, reject) => {\n      this.ws.onopen = () => resolve();\n      this.ws.onerror = error => reject(error);\n    });\n  }\n  onStatus(callback) {\n    this.callbacks.set('status', callback);\n  }\n  moveConveyor() {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify({\n        action: 'move_conveyor'\n      }));\n    }\n  }\n  disconnect() {\n    if (this.ws) {\n      this.ws.close();\n    }\n  }\n}\nexport const wsService = new WebSocketService();","map":{"version":3,"names":["WebSocketService","constructor","ws","callbacks","Map","connect","WebSocket","onmessage","event","data","JSON","parse","has","get","status","Promise","resolve","reject","onopen","onerror","error","onStatus","callback","set","moveConveyor","readyState","OPEN","send","stringify","action","disconnect","close","wsService"],"sources":["/Users/toeychalinee/Lipstick-maker/src/services/websocket.js"],"sourcesContent":["// src/services/websocket.js\nclass WebSocketService {\n  constructor() {\n    this.ws = null;\n    this.callbacks = new Map();\n  }\n\n  connect() {\n    this.ws = new WebSocket('ws://localhost:8000/ws');\n    \n    this.ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (this.callbacks.has('status')) {\n        this.callbacks.get('status')(data.status);\n      }\n    };\n\n    return new Promise((resolve, reject) => {\n      this.ws.onopen = () => resolve();\n      this.ws.onerror = (error) => reject(error);\n    });\n  }\n\n  onStatus(callback) {\n    this.callbacks.set('status', callback);\n  }\n\n  moveConveyor() {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify({ action: 'move_conveyor' }));\n    }\n  }\n\n  disconnect() {\n    if (this.ws) {\n      this.ws.close();\n    }\n  }\n}\n\nexport const wsService = new WebSocketService();"],"mappings":"AAAA;AACA,MAAMA,gBAAgB,CAAC;EACrBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,EAAE,GAAG,IAAI;IACd,IAAI,CAACC,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC5B;EAEAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACH,EAAE,GAAG,IAAII,SAAS,CAAC,wBAAwB,CAAC;IAEjD,IAAI,CAACJ,EAAE,CAACK,SAAS,GAAIC,KAAK,IAAK;MAC7B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;MACnC,IAAI,IAAI,CAACN,SAAS,CAACS,GAAG,CAAC,QAAQ,CAAC,EAAE;QAChC,IAAI,CAACT,SAAS,CAACU,GAAG,CAAC,QAAQ,CAAC,CAACJ,IAAI,CAACK,MAAM,CAAC;MAC3C;IACF,CAAC;IAED,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAI,CAACf,EAAE,CAACgB,MAAM,GAAG,MAAMF,OAAO,CAAC,CAAC;MAChC,IAAI,CAACd,EAAE,CAACiB,OAAO,GAAIC,KAAK,IAAKH,MAAM,CAACG,KAAK,CAAC;IAC5C,CAAC,CAAC;EACJ;EAEAC,QAAQA,CAACC,QAAQ,EAAE;IACjB,IAAI,CAACnB,SAAS,CAACoB,GAAG,CAAC,QAAQ,EAAED,QAAQ,CAAC;EACxC;EAEAE,YAAYA,CAAA,EAAG;IACb,IAAI,IAAI,CAACtB,EAAE,IAAI,IAAI,CAACA,EAAE,CAACuB,UAAU,KAAKnB,SAAS,CAACoB,IAAI,EAAE;MACpD,IAAI,CAACxB,EAAE,CAACyB,IAAI,CAACjB,IAAI,CAACkB,SAAS,CAAC;QAAEC,MAAM,EAAE;MAAgB,CAAC,CAAC,CAAC;IAC3D;EACF;EAEAC,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAAC5B,EAAE,EAAE;MACX,IAAI,CAACA,EAAE,CAAC6B,KAAK,CAAC,CAAC;IACjB;EACF;AACF;AAEA,OAAO,MAAMC,SAAS,GAAG,IAAIhC,gBAAgB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}